# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json

language: en-US
tone_instructions: chill
early_access: true
enable_free_tier: true

reviews:
  profile: chill
  request_changes_workflow: false
  high_level_summary: true
  high_level_summary_placeholder: "@coderabbitai summary"
  auto_title_placeholder: "@coderabbitai"
  poem: false
  review_status: true
  collapse_walkthrough: false
  sequence_diagrams: true
  changed_files_summary: true

  auto_review:
    enabled: true
    auto_incremental_review: true
    ignore_title_keywords:
      - "WIP"
      - "DO NOT REVIEW"
      - "[skip ci]"
    drafts: false
    base_branches:
      - main

  finishing_touches:
    docstrings:
      enabled: true
    unit_tests:
      enabled: false

  tools:
    phpstan:
      enabled: true
    gitleaks:
      enabled: true

  path_filters:
    - "!**/vendor/**"
    - "!**/node_modules/**"
    - "!**/*.lock"
    - "!**/composer.lock"
    - "!**/package-lock.json"
    - "!**/storage/**"
    - "!**/bootstrap/cache/**"
    - "!**/.git/**"

  path_instructions:
    - path: "app/**/*.php"
      instructions: |
        Focus on:
        - PSR-12 coding standards
        - Laravel best practices
        - Proper dependency injection
        - Type declarations

    - path: "app/Http/Controllers/**"
      instructions: |
        Focus on:
        - Single responsibility
        - Use Form Requests for validation
        - Proper authorization checks
        - Return appropriate responses

    - path: "app/Http/Requests/**"
      instructions: |
        Focus on:
        - Validation rules completeness
        - Authorization logic
        - Custom error messages

    - path: "app/Models/**"
      instructions: |
        Review:
        - Relationship definitions
        - Fillable/guarded attributes
        - Casts and accessors
        - Query scopes

    - path: "database/migrations/**"
      instructions: |
        Review:
        - Schema changes for backward compatibility
        - Index optimization
        - Foreign key constraints
        - Rollback safety

    - path: "resources/js/**/*.tsx"
      instructions: |
        Focus on:
        - React component best practices
        - TypeScript type safety
        - Inertia.js patterns
        - Performance

    - path: "tests/**/*.php"
      instructions: |
        Focus on:
        - Test coverage completeness
        - Test isolation
        - Clear test descriptions

chat:
  auto_reply: true

knowledge_base:
  opt_out: false
  web_search:
    enabled: true
  code_guidelines:
    enabled: true
